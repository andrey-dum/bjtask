(this.webpackJsonpbjtask=this.webpackJsonpbjtask||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchTasksStart",(function(){return F})),n.d(a,"fetchTasksSuccess",(function(){return U})),n.d(a,"fetchTasksError",(function(){return B})),n.d(a,"setTotalTasksCount",(function(){return W})),n.d(a,"setSortField",(function(){return z})),n.d(a,"setSortDirection",(function(){return H})),n.d(a,"changePage",(function(){return P})),n.d(a,"showAlert",(function(){return G})),n.d(a,"hideAlert",(function(){return M})),n.d(a,"fetchTasks",(function(){return K})),n.d(a,"update",(function(){return X})),n.d(a,"createTask",(function(){return J}));var r={};n.r(r),n.d(r,"setError",(function(){return Y})),n.d(r,"loginUser",(function(){return Z})),n.d(r,"logout",(function(){return $})),n.d(r,"login",(function(){return ee})),n.d(r,"autoLogin",(function(){return te}));var c=n(0),o=n.n(c),s=n(10),i=n.n(s),l=(n(114),n(32)),u=n(16),d=(n(115),n(7)),j=n(24),b=n(13),p=n(29),O=n(30),m=n.n(O),f=n(48),h=n(87),x=n(88),g=n.n(x),v="?developer=AndreyD",y=h.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2/"}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(d.a)({developer:"AndreyD"},e);return y.get("/?".concat(g.a.stringify(t))).then((function(e){return e.data}))},S=function(e){var t=e.username,n=e.email,a=e.text,r=e.status,c=new FormData;return c.append("username",t),c.append("email",n),c.append("text",a),c.append("status",r),y.post("/create".concat(v),c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},T=function(e,t){var n=new FormData;return n.append("username",e),n.append("password",t),y.post("/login".concat(v),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},_=function(e){var t=new FormData,n=localStorage.getItem("token");return t.append("text",e.text),t.append("status",e.status),t.append("token",n),y.post("/edit/".concat(e.id).concat(v),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},C="tasks/FETCH_TASKS_START",w="tasks/FETCH_TASKS_SUCCESS",E="tasks/FETCH_TASKS_ERROR",N="tasks/SET_TOTAL_TASKS_COUNT",I="tasks/SET_SORT_FIELD",D="tasks/SET_SORT_DIRECTION",A="tasks/CHANGE_PAGE",R="tasks/SHOW_ALERT",L="tasks/HIDE_ALERT";function F(){return{type:C}}function U(e){return{type:w,payload:e}}function B(e){return{type:E,payload:e}}function W(e){return{type:N,payload:e}}function z(e){return{type:I,payload:e}}function H(e){return{type:D,payload:e}}function P(e){return{type:A,payload:e}}function G(e){return{type:R,payload:e}}function M(){return{type:L}}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(f.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(F()),t.prev=1,t.next=4,k(e);case 4:"error"===(a=t.sent).status?n(B(a.message)):(n(U(a.message.tasks)),n(W(+a.message.total_task_count))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(B(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}function X(e){return function(){var t=Object(f.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(e);case 3:"error"===(a=t.sent).status?console.log(a.message):n(K()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function J(e,t){return function(){var n=Object(f.a)(m.a.mark((function n(a){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S(e);case 3:"error"===(r=n.sent).status?a(B(r.message)):(a(G({type:"success",text:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430!!!"})),t.push("/"),setTimeout((function(){a(M())}),2e3)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}var V="user/LOGIN_USER",q="user/LOGOUT",Q="user/SET_ERROR";function Y(e){return{type:Q,payload:e}}function Z(e){return{type:V,payload:e}}function $(){return localStorage.removeItem("token"),localStorage.removeItem("experationDate"),{type:q}}function ee(e,t){return function(){var n=Object(f.a)(m.a.mark((function n(a){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(e,t);case 3:"error"===(r=n.sent).status?a(Y(r.message)):(localStorage.setItem("token",r.message.token),c=new Date((new Date).getTime()+864e5),localStorage.setItem("experationDate",c),a(Z(r.message))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}function te(){return function(e){var t=localStorage.getItem("token");t?new Date(localStorage.getItem("experationDate"))<=new Date?e($()):e(Z(t)):e($())}}var ne=Object(d.a)(Object(d.a)({},a),r),ae=function(){var e=Object(b.b)();return Object(p.b)(ne,e)},re=function(e){var t=Object(c.useState)(e),n=Object(j.a)(t,2),a=n[0],r=n[1];return{value:a,onChange:function(e){r(e.target.value)}}},ce=n(210),oe=n(193),se=n(200),ie=n(202),le=n(213),ue=n(2),de=Object(oe.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}}));var je=function(){var e=de(),t=Object(u.g)(),n=Object(b.c)((function(e){return e.tasks})).error,a=o.a.useState(!1),r=Object(j.a)(a,2),c=r[0],s=r[1],i=ae().createTask,l=re(""),p=re(""),O=re("");return Object(ue.jsxs)("div",{className:e.root,children:[Object(ue.jsx)(le.a,Object(d.a)(Object(d.a)({},l),{},{id:"username",label:"Username",style:{margin:8},placeholder:"Username",helperText:"Full Username!",fullWidth:!0,margin:"normal"})),Object(ue.jsx)("div",{className:"error",children:n&&n.username}),Object(ue.jsx)(le.a,Object(d.a)(Object(d.a)({},p),{},{id:"email",label:"Email",style:{margin:8},placeholder:"Email",helperText:"Email!",fullWidth:!0,margin:"normal"})),Object(ue.jsx)("div",{className:"error",children:n&&n.email}),Object(ue.jsx)(le.a,Object(d.a)(Object(d.a)({},O),{},{id:"text",label:"Text",style:{margin:8},placeholder:"Text",helperText:"Full Text!",fullWidth:!0,margin:"normal"})),Object(ue.jsx)(se.a,{style:{margin:8},control:Object(ue.jsx)(ce.a,{checked:c,onChange:function(e){return s(e.target.checked)},name:"status"}),label:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(ue.jsx)(ie.a,{style:{margin:8},variant:"contained",color:"primary",onClick:function(){var e={username:l.value,email:p.value,text:O.value,status:c?10:0};i(e,t)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})};var be=function(){var e=ae().login,t=Object(b.c)((function(e){return e.auth})),n=re(""),a=re("");return Object(ue.jsxs)("div",{children:[Object(ue.jsx)(le.a,Object(d.a)(Object(d.a)({},n),{},{id:"username",label:"Username",style:{margin:8},placeholder:"Username",helperText:"Full Username!",fullWidth:!0,margin:"normal"})),Object(ue.jsx)("div",{className:"error",children:t.error&&t.error.username}),Object(ue.jsx)(le.a,Object(d.a)(Object(d.a)({},a),{},{id:"password",type:"password",label:"password",style:{margin:8},placeholder:"password",helperText:"Enter password!",fullWidth:!0,margin:"normal"})),Object(ue.jsx)("div",{className:"error",children:t.error&&t.error.password}),Object(ue.jsx)(ie.a,{style:{margin:8},variant:"contained",color:"primary",onClick:function(){e(n.value,a.value)},children:"\u0412\u043e\u0439\u0442\u0438"})]})},pe=n(203),Oe=n(204),me=n(158),fe=Object(oe.a)((function(e){return{root:{flexGrow:1,marginBottom:25},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function he(){var e=fe(),t=ae().logout,n=Object(b.c)((function(e){return e.auth}));return Object(ue.jsx)("div",{className:e.root,children:Object(ue.jsx)(pe.a,{position:"static",children:Object(ue.jsxs)(Oe.a,{children:[Object(ue.jsx)(me.a,{variant:"h6",className:e.title,children:"App"}),Object(ue.jsx)(ie.a,{component:l.b,to:"/",color:"inherit",children:"Home"}),n.isAuth?Object(ue.jsx)(ie.a,{onClick:t,color:"inherit",children:"Logout"}):Object(ue.jsx)(ie.a,{component:l.b,to:"/login",color:"inherit",children:"Login"}),Object(ue.jsx)(ie.a,{component:l.b,to:"/add",color:"inherit",children:"Add"})]})})})}var xe=n(96);var ge=function(e){var t=e.component,n=Object(xe.a)(e,["component"]),a=Object(b.c)((function(e){return e.auth})).token;return Object(ue.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return a?Object(ue.jsx)(u.a,{to:"/"}):Object(ue.jsx)(t,Object(d.a)({},e))}}))},ve=n(205),ye=n(206),ke=n(201),Se=n(69),Te=n.n(Se),_e=n(89),Ce=n.n(_e),we=n(90),Ee=n.n(we),Ne={0:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",1:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c",10:"\u0437\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",11:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"},Ie=Object(oe.a)({root:{minWidth:275,display:"flex",alignItems:"center",padding:"0 20px",marginBottom:25},cardContent:{flex:1},title:{fontSize:14},pos:{marginBottom:12}});function De(e){var t=e.task,n=Object(u.g)(),a=Ie(),r=Object(c.useState)(!1),o=Object(j.a)(r,2),s=o[0],i=o[1],l=Object(c.useState)(t.text),d=Object(j.a)(l,2),p=d[0],O=d[1],m=Object(c.useState)(10===t.status||11===t.status),f=Object(j.a)(m,2),h=f[0],x=f[1],g=ae(),v=g.update,y=g.logout,k=Object(b.c)((function(e){return e.auth})).token,S=function(){i(!s)},T=h===(10===t.status||11===t.status)&&p===t.text;return Object(ue.jsxs)(ve.a,{className:a.root,children:[s?Object(ue.jsxs)(ye.a,{className:a.cardContent,children:[Object(ue.jsx)(me.a,{className:a.title,color:"textSecondary",gutterBottom:!0,children:t.email}),Object(ue.jsx)(me.a,{variant:"h5",component:"h2",children:t.username}),Object(ue.jsx)(me.a,{className:a.pos,color:"textSecondary",children:Object(ue.jsx)("input",{name:"username",value:p,onChange:function(e){return O(e.target.value)}})}),Object(ue.jsx)(ce.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:h,onChange:function(e){return x(e.target.checked)}}),Object(ue.jsx)(ie.a,{variant:"contained",color:"primary",onClick:function(){var e=localStorage.getItem("token"),a={id:t.id,text:p,status:t.status};h||(a.status=0),h||p===t.text||(a.status=1),h&&(a.status=10),h&&p!==t.text&&(a.status=11),e?v(a):(y(),n.push("/login"))},disabled:T,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(ue.jsxs)(ye.a,{className:a.cardContent,children:[Object(ue.jsx)(me.a,{className:a.title,color:"textSecondary",gutterBottom:!0,children:t.email}),Object(ue.jsx)(me.a,{variant:"h5",component:"h2",children:t.username}),Object(ue.jsx)(me.a,{className:a.pos,children:t.text}),Object(ue.jsxs)(me.a,{variant:"body2",component:"p",color:"textSecondary",children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",Ne[t.status]]})]}),10===t.status||11===t.status?Object(ue.jsx)(Te.a,{style:{fontSize:50,color:"#7ad87a"}}):Object(ue.jsx)(Te.a,{style:{fontSize:50,color:"#ccc"}}),k&&(s?Object(ue.jsx)(ke.a,{onClick:S,"aria-label":"CloseIcon",className:a.margin,children:Object(ue.jsx)(Ee.a,{fontSize:"large"})}):Object(ue.jsx)(ke.a,{onClick:S,"aria-label":"editToggle",className:a.margin,children:Object(ue.jsx)(Ce.a,{fontSize:"large"})}))]})}var Ae=n(207),Re=Object(oe.a)((function(e){return{root:{display:"flex",justifyContent:"center",marginTop:50}}}));function Le(){var e=Re();return Object(ue.jsx)("div",{className:e.root,children:Object(ue.jsx)(Ae.a,{})})}var Fe=n(91),Ue=n.n(Fe),Be=n(92),We=n.n(Be),ze=Object(oe.a)({root:{minWidth:275,display:"flex",alignItems:"center",padding:"0 20px",marginBottom:25},cardContent:{flex:1},title:{fontSize:14},pos:{marginBottom:12}});var He=function(){for(var e=ze(),t=o.a.useState(1),n=Object(j.a)(t,2),a=n[0],r=n[1],c=ae().changePage,s=Object(b.c)((function(e){return e.tasks})),i=s.page,l=s.total_task_count,u=s.pageLimit,d=Math.ceil(l/u),p=[],O=1;O<=d;O++)p.push(O);var m=Math.ceil(d/5),f=5*(a-1)+1,h=5*a;return d<=1?null:Object(ue.jsxs)("div",{className:"pagination",children:[a>1&&Object(ue.jsx)(ke.a,{onClick:function(){r(a-1)},"aria-label":"CloseIcon",className:e.margin,children:Object(ue.jsx)(Ue.a,{fontSize:"medium"})}),p.filter((function(e){return e>=f&&e<=h})).map((function(e){return Object(ue.jsx)("span",{onClick:function(){return c(e)},className:i===e?"active":"",children:e},e)})),m>a&&Object(ue.jsx)(ke.a,{onClick:function(){r(a+1)},"aria-label":"CloseIcon",className:e.margin,children:Object(ue.jsx)(We.a,{fontSize:"medium"})})]})},Pe=n(214),Ge=n(215),Me=n(199),Ke=n(209),Xe=n(93),Je=n.n(Xe),Ve=n(94),qe=n.n(Ve),Qe=Object(oe.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120}}}));function Ye(){var e=Qe(),t=ae(),n=t.setSortField,a=t.setSortDirection,r=Object(b.c)((function(e){return e.tasks})),c=r.sort_direction,s=r.sort_field,i=o.a.useState(!1),l=Object(j.a)(i,2),u=l[0],d=l[1];return Object(ue.jsx)("div",{children:Object(ue.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:30},children:[Object(ue.jsxs)(Me.a,{className:e.formControl,children:[Object(ue.jsx)(Pe.a,{id:"demo-controlled-open-select-label",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(ue.jsxs)(Ke.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:u,onClose:function(){d(!1)},onOpen:function(){d(!0)},value:s,onChange:function(e){n(e.target.value)},children:[Object(ue.jsx)(Ge.a,{value:"id",children:"Id"}),Object(ue.jsx)(Ge.a,{value:"username",children:"Username"}),Object(ue.jsx)(Ge.a,{value:"email",children:"Email"}),Object(ue.jsx)(Ge.a,{value:"status",children:"Status"})]})]}),Object(ue.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:function(){return a("asc"===c?"desc":"asc")},children:["\u041f\u043e\u0440\u044f\u0434\u043e\u043a ","desc"===c?Object(ue.jsx)(Je.a,{}):Object(ue.jsx)(qe.a,{})]})]})})}var Ze=function(){var e=ae().fetchTasks,t=Object(b.c)((function(e){return e.tasks})),n=t.page,a=t.loading,r=t.tasks,o=t.sort_direction,s=t.sort_field;return Object(c.useEffect)((function(){e({page:n,sort_field:s,sort_direction:o})}),[s,o,n]),Object(ue.jsxs)("div",{children:[Object(ue.jsx)(Ye,{}),Object(ue.jsx)(He,{}),a?Object(ue.jsx)(Le,{}):r.map((function(e){return Object(ue.jsx)(De,{task:e},e.id)}))]})},$e=n(208),et=n(212);function tt(){var e=Object(b.c)((function(e){return e.tasks})).alert;return Object(ue.jsx)("div",{children:Object(ue.jsx)(et.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!e,message:null===e||void 0===e?void 0:e.text})})}var nt=function(){var e=ae().autoLogin;return Object(c.useEffect)((function(){e()}),[]),Object(ue.jsx)(l.a,{basename:"/bjtask",children:Object(ue.jsxs)("div",{className:"app",children:[Object(ue.jsx)(he,{}),Object(ue.jsxs)($e.a,{maxWidth:"sm",children:[Object(ue.jsxs)(u.d,{children:[Object(ue.jsx)(u.b,{path:"/add",component:je}),Object(ue.jsx)(ge,{path:"/login",component:be}),Object(ue.jsx)(u.b,{path:"/",component:Ze})]}),Object(ue.jsx)(tt,{})]})]})})},at=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},rt=n(95),ct={loading:!1,error:null,token:null,isAuth:!1};var ot={tasks:[],loading:!1,pageLimit:3,total_task_count:0,page:1,error:null,editMode:!1,sort_direction:"asc",sort_field:"id",alert:null};var st=Object(p.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case w:return Object(d.a)(Object(d.a)({},e),{},{tasks:t.payload,loading:!1});case E:return Object(d.a)(Object(d.a)({},e),{},{error:t.payload,loading:!1});case N:return Object(d.a)(Object(d.a)({},e),{},{total_task_count:t.payload});case I:return Object(d.a)(Object(d.a)({},e),{},{sort_field:t.payload});case D:return Object(d.a)(Object(d.a)({},e),{},{sort_direction:t.payload});case A:return Object(d.a)(Object(d.a)({},e),{},{page:t.payload});case R:return Object(d.a)(Object(d.a)({},e),{},{alert:t.payload});case L:return Object(d.a)(Object(d.a)({},e),{},{alert:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(d.a)(Object(d.a)({},e),{},{token:t.payload,isAuth:!0});case q:return Object(d.a)(Object(d.a)({},e),{},{token:null,sessionId:null,isAuth:!1});case Q:return Object(d.a)(Object(d.a)({},e),{},{error:t.payload});default:return e}}}),it="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):p.d,lt=Object(p.e)(st,it(Object(p.a)(rt.a)));i.a.render(Object(ue.jsx)(o.a.StrictMode,{children:Object(ue.jsx)(b.a,{store:lt,children:Object(ue.jsx)(nt,{})})}),document.getElementById("root")),at()}},[[156,1,2]]]);
//# sourceMappingURL=main.d9b10b25.chunk.js.map